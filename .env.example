# ===========================================
# LA BOLITA BACKEND - Environment Variables
# ===========================================
# Copy this file to .env and fill in your values
# NEVER commit your .env file to version control

# ===========================================
# Server Configuration
# ===========================================
NODE_ENV=development
PORT=5000
API_BASE_URL=http://localhost:5000

# ===========================================
# Database Configuration (PostgreSQL)
# ===========================================
DATABASE_URL=postgresql://username:password@localhost:5432/labolita
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ===========================================
# SIWE Admin Authentication
# ===========================================
# Domain for SIWE message (without protocol)
SIWE_DOMAIN=localhost

# Admin wallet addresses (comma-separated)
# These wallets can access admin panel via SIWE
ADMIN_WALLETS=0x1234...,0x5678...

# Session secret for admin JWT tokens
SESSION_SECRET=your-super-secret-session-key-change-in-production

# Admin session duration
ADMIN_SESSION_DURATION=8h

# ===========================================
# Blockchain Configuration (Polygon)
# ===========================================
# RPC URL for Polygon network (canonical variable)
# The backend reads RPC_URL first; falls back to POLYGON_RPC_URL if not set.
RPC_URL=https://polygon-rpc.com
POLYGON_RPC_URL=https://polygon-rpc.com

# Chain ID (137=Polygon Mainnet, 80002=Amoy Testnet)
CHAIN_ID=137

# Alternative RPCs (fallbacks)
RPC_URL_FALLBACK_1=https://rpc-mainnet.matic.quiknode.pro
RPC_URL_FALLBACK_2=https://polygon-mainnet.g.alchemy.com/v2/your-key

# La Bolita Contract Address
CONTRACT_ADDRESS=0x...

# USDT Token Address on Polygon
TOKEN_ADDRESS=0xc2132D05D31c914a87C6611C10748AEb04B58e8F

# Operator wallet private key (for automated transactions)
# WARNING: Keep this extremely secure!
# OPERATOR_PRIVATE_KEY=

# ===========================================
# Chainlink VRF Configuration
# ===========================================
VRF_COORDINATOR=0xAE975071Be8F8eE67addBC1A82488F1C24858067
VRF_SUBSCRIPTION_ID=your_subscription_id
VRF_KEY_HASH=0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd

# ===========================================
# Payment Gateway (NOWPayments)
# ===========================================
NOWPAYMENTS_API_KEY=your_api_key
NOWPAYMENTS_IPN_SECRET=your_ipn_secret
NOWPAYMENTS_SANDBOX=true

# ===========================================
# CORS Configuration
# ===========================================
# Frontend URLs allowed (comma-separated)
FRONTEND_URL=http://localhost:3000
ALLOWED_ORIGINS=http://localhost:3000,https://labolita.io

# ===========================================
# Rate Limiting
# ===========================================
# Requests per window
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Stricter limits for auth endpoints
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=10

# ===========================================
# Game Settings
# ===========================================
MAX_BET_AMOUNT=1000
MIN_BET_AMOUNT=1
TICKET_PRICE=1

# Prize claim period in days
CLAIM_PERIOD_DAYS=30

# ===========================================
# Scheduler Configuration
# ===========================================
# Enable automatic draw creation/closing
ENABLE_SCHEDULER=true

# Draw times (UTC) - comma-separated HH:MM format
BOLITA_DRAW_TIMES=10:00,15:00,21:00
FORTUNA_DRAW_TIMES=20:00

# Fortuna draw days (0=Sunday, 6=Saturday)
FORTUNA_DRAW_DAYS=3,6

# ===========================================
# Merkle Tree & Claims
# ===========================================
# IPFS gateway for storing Merkle proofs (optional)
# IPFS_GATEWAY=https://ipfs.io/ipfs/

# ===========================================
# Logging
# ===========================================
LOG_LEVEL=info
LOG_FORMAT=combined

# Enable SQL query logging
LOG_SQL_QUERIES=false

# ===========================================
# Security
# ===========================================
# Enable helmet security headers
ENABLE_HELMET=true

# Enable geoblocking
ENABLE_GEOBLOCK=true

# Trusted proxy count (for rate limiting behind proxy)
TRUST_PROXY=1

# ===========================================
# Legacy JWT (for backwards compatibility)
# ===========================================
# This was used before Web3-only migration
# Can be removed once fully migrated
JWT_SECRET=legacy-jwt-secret-for-migration
JWT_EXPIRES_IN=1h
BCRYPT_ROUNDS=10
